@use 'variables' as *;
@use 'sass:math';

@mixin respond($breakpoint) {
    // mobile: 0 ~ 480
    @if $breakpoint == mobile {
        @media (max-width: #{$bp-mobile}) {
            @content;
        }

        // mobile-plus: 481 ~ 768
    } @else if $breakpoint == mobile-plus {
        @media (min-width: calc(#{$bp-mobile} + 0.01rem)) and (max-width: #{$bp-mobile-plus}) {
            @content;
        }

        // tablet: 769 ~ 992
    } @else if $breakpoint == tablet {
        @media (min-width: calc(#{$bp-mobile-plus} + 0.01rem)) and (max-width: #{$bp-tablet}) {
            @content;
        }

        // laptop: 993 ~ 1200
    } @else if $breakpoint == laptop {
        @media (min-width: calc(#{$bp-tablet} + 0.01rem)) and (max-width: #{$bp-laptop}) {
            @content;
        }

        // pc: 1201 ~ ∞ (고정)
    } @else if $breakpoint == pc {
        @media (min-width: calc(#{$bp-laptop} + 0.01rem)) {
            @content;
        }
    } @else {
        @warn "⚠️ Unknown breakpoint `#{$breakpoint}`";
    }
}

// px → rem
@function rem($px, $base: 16) {
    @return math.div($px, $base) * 1rem;
}

// vw 가변 + 구간 클램프
@function vw-clamp($fromPx, $toPx, $fromWidth, $toWidth, $base: 16) {
    $rangePx: $toPx - $fromPx;
    $rangeWidth: $toWidth - $fromWidth;

    $slope: math.div($rangePx, $rangeWidth) * 100;

    $intercept: $fromPx - ($slope * math.div($fromWidth, 100));

    $low: if($fromPx < $toPx, $fromPx, $toPx);
    $high: if($fromPx < $toPx, $toPx, $fromPx);

    @return clamp(
        rem($low, $base),
        calc(#{$slope}vw + #{rem($intercept, $base)}),
        rem($high, $base)
    );
}

// 공통 반응형 값 지정 믹스인
@mixin r($prop, $mobilePx, $mobilePlusPx, $tabletPx, $laptopPx, $pcPx, $base: 16) {
    /* 0 ~ 480 */
    @media (max-width: #{$bp-mobile}) {
        #{$prop}: vw-clamp(0, $mobilePx, 0, 480, $base);
    }

    /* 361 ~ 768 */
    @media (min-width: calc(#{$bp-mobile} + 0.01rem)) and (max-width: #{$bp-mobile-plus}) {
        @if $mobilePlusPx == $mobilePx {
            #{$prop}: rem($mobilePlusPx, $base);
        } @else {
            #{$prop}: vw-clamp($mobilePx, $mobilePlusPx, 480, 768, $base);
        }
    }

    /* 769 ~ 992 */
    @media (min-width: calc(#{$bp-mobile-plus} + 0.01rem)) and (max-width: #{$bp-tablet}) {
        @if $tabletPx == $mobilePlusPx {
            #{$prop}: rem($tabletPx, $base);
        } @else {
            #{$prop}: vw-clamp($mobilePlusPx, $tabletPx, 768, 992, $base);
        }
    }

    /* 993 ~ 1200 */
    @media (min-width: calc(#{$bp-tablet} + 0.01rem)) and (max-width: #{$bp-laptop}) {
        #{$prop}: rem($laptopPx, $base);
        // @if $laptopPx == $tabletPx {
        //     #{$prop}: rem($laptopPx, $base);
        // } @else {
        //     /* tablet 33px → laptop 37px */
        //     #{$prop}: vw-clamp($tabletPx, $laptopPx, 992, 1200, $base);
        // }
    }

    /* PC 1201 ~ ∞ */
    @media (min-width: calc(#{$bp-laptop} + 0.01rem)) {
        #{$prop}: rem($pcPx, $base);
    }
}
